# CMSIS LM3S åµŒå…¥å¼ç³»çµ±æ•™å­¸å¤§ç¶±

> æœ¬å¤§ç¶±å°‡è¤‡é›œçš„åµŒå…¥å¼ç³»çµ±é–‹ç™¼åˆ†è§£ç‚º 13 å€‹æ¨¡çµ„ï¼Œæ¯å€‹æ¨¡çµ„éƒ½å°æ‡‰å°ˆæ¡ˆå…§çš„å¯¦éš›ç¨‹å¼ç¢¼å’Œæª”æ¡ˆï¼Œè®“å­¸ç”Ÿèƒ½å¤ é‚Šå­¸é‚Šå¯¦ä½œã€‚

---

## ğŸ“š å­¸ç¿’è·¯ç·šåœ–

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          åŸºç¤çŸ¥è­˜éšæ®µ (ç¬¬ 1-2 é€±)                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æ¨¡çµ„ 01  â”‚ â†’  â”‚ æ¨¡çµ„ 02  â”‚ â†’  â”‚ æ¨¡çµ„ 03  â”‚
    â”‚ é›»è…¦åŸºç¤  â”‚    â”‚ ç¨‹å¼ç·¨è­¯  â”‚    â”‚ è¨˜æ†¶é«”   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          åµŒå…¥å¼ç³»çµ±éšæ®µ (ç¬¬ 3-4 é€±)                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æ¨¡çµ„ 04  â”‚ â†’  â”‚ æ¨¡çµ„ 05  â”‚ â†’  â”‚ æ¨¡çµ„ 06  â”‚
    â”‚ åµŒå…¥å¼   â”‚    â”‚ ARM æ¶æ§‹ â”‚    â”‚ è¨Šè™Ÿè™•ç†  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          DSP æ‡‰ç”¨éšæ®µ (ç¬¬ 5-6 é€±)                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æ¨¡çµ„ 07  â”‚    â”‚ æ¨¡çµ„ 08  â”‚    â”‚ æ¨¡çµ„ 12  â”‚
    â”‚   FIR    â”‚    â”‚   IIR    â”‚    â”‚  CMSIS   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          é–‹ç™¼å·¥å…·éšæ®µ (ç¬¬ 7-8 é€±)                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ æ¨¡çµ„ 09  â”‚    â”‚ æ¨¡çµ„ 10  â”‚    â”‚ æ¨¡çµ„ 11  â”‚
    â”‚  Docker  â”‚    â”‚   QEMU   â”‚    â”‚   GDB    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          å¯¦æˆ°æ¼”ç·´éšæ®µ (ç¬¬ 9-10 é€±)                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚ æ¨¡çµ„ 13  â”‚
                       â”‚ å°ˆæ¡ˆå¯¦æˆ°  â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ æ¨¡çµ„ç¸½è¦½

| æ¨¡çµ„ | ä¸»é¡Œ | é è¨ˆæ™‚æ•¸ | å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ | é›£åº¦ |
|------|------|---------|-------------|------|
| 01 | é›»è…¦åŸºç¤çŸ¥è­˜ | 2 å°æ™‚ | - | â­ |
| 02 | ç¨‹å¼ç·¨è­¯èˆ‡åŸ·è¡Œ | 3 å°æ™‚ | `Makefile`, `makedefs` | â­â­ |
| 03 | è¨˜æ†¶é«”åŸç† | 3 å°æ™‚ | `*.ld`, `startup_gcc.c` | â­â­ |
| 04 | åµŒå…¥å¼ç³»çµ±å…¥é–€ | 3 å°æ™‚ | `uart_hello_world.c` | â­â­ |
| 05 | ARM æ¶æ§‹è©³è§£ | 4 å°æ™‚ | `core_cm3.h`, `lm3s_cmsis.h` | â­â­â­ |
| 06 | è¨Šè™Ÿè™•ç†åŸºç¤ | 3 å°æ™‚ | - | â­â­ |
| 07 | FIR æ¿¾æ³¢å™¨ | 4 å°æ™‚ | `arm_fir_example_f32.c` | â­â­â­ |
| 08 | IIR æ¿¾æ³¢å™¨ | 3 å°æ™‚ | DSP Library | â­â­â­ |
| 09 | Docker å®¹å™¨æŠ€è¡“ | 2 å°æ™‚ | `Dockerfile`, `docker-compose.yml` | â­â­ |
| 10 | QEMU æ¨¡æ“¬å™¨ | 3 å°æ™‚ | `run-examples.sh` | â­â­ |
| 11 | GDB é™¤éŒ¯å™¨ | 4 å°æ™‚ | `test_gdb.gdb` | â­â­â­ |
| 12 | CMSIS-DSP å‡½å¼åº« | 4 å°æ™‚ | `arm_math.h`, DSP Library | â­â­â­ |
| 13 | å°ˆæ¡ˆå¯¦æˆ°æ¼”ç·´ | 6 å°æ™‚ | æ•´å€‹å°ˆæ¡ˆ | â­â­â­â­ |
| **ç¸½è¨ˆ** | | **44 å°æ™‚** | | |

---

## ğŸ¯ æ¨¡çµ„è©³ç´°è¦åŠƒ

---

### æ¨¡çµ„ 01ï¼šé›»è…¦åŸºç¤çŸ¥è­˜

**å­¸ç¿’ç›®æ¨™**ï¼š
- ç†è§£é›»è…¦çš„åŸºæœ¬çµ„æˆï¼ˆCPUã€è¨˜æ†¶é«”ã€è¼¸å…¥è¼¸å‡ºï¼‰
- èªè­˜äºŒé€²ä½èˆ‡åå…­é€²ä½æ•¸å­—ç³»çµ±
- äº†è§£è™•ç†å™¨å¦‚ä½•åŸ·è¡ŒæŒ‡ä»¤

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- ï¼ˆç„¡ç‰¹å®šæª”æ¡ˆï¼Œç‚ºåŸºç¤ç†è«–ï¼‰

**æ•™å­¸å…§å®¹**ï¼š
1. å¾ç®—ç›¤åˆ°ç¾ä»£é›»è…¦çš„æ¼”é€²
2. äºŒé€²ä½æ•¸å­—ç³»çµ±èˆ‡è³‡æ–™è¡¨ç¤º
3. CPU çš„åŸºæœ¬å·¥ä½œåŸç†
4. è¨˜æ†¶é«”çš„éšå±¤çµæ§‹ï¼ˆæš«å­˜å™¨ã€å¿«å–ã€RAMã€ROMï¼‰
5. è¼¸å…¥è¼¸å‡ºè£ç½®åŸºç¤

**å¯¦ä½œç·´ç¿’**ï¼š
- äºŒé€²ä½èˆ‡åå…­é€²ä½è½‰æ›ç·´ç¿’
- ç†è§£ç°¡å–®çš„ CPU åŸ·è¡Œé€±æœŸ

**ASCII åœ–è§£é‡é»**ï¼š
- é›»è…¦äº”å¤§å–®å…ƒçµæ§‹åœ–
- CPU å…§éƒ¨æ¶æ§‹åœ–
- è¨˜æ†¶é«”éšå±¤é‡‘å­—å¡”åœ–

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/01-é›»è…¦åŸºç¤çŸ¥è­˜.md`

---

### æ¨¡çµ„ 02ï¼šç¨‹å¼ç·¨è­¯èˆ‡åŸ·è¡Œ

**å­¸ç¿’ç›®æ¨™**ï¼š
- ç†è§£å¾åŸå§‹ç¢¼åˆ°å¯åŸ·è¡Œæª”çš„å®Œæ•´æµç¨‹
- èªè­˜ GCC å·¥å…·éˆï¼ˆç·¨è­¯å™¨ã€é€£çµå™¨ï¼‰
- å­¸æœƒä½¿ç”¨ Makefile è‡ªå‹•åŒ–ç·¨è­¯
- äº†è§£äº¤å‰ç·¨è­¯çš„æ¦‚å¿µ

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `Makefile` - å°ˆæ¡ˆä¸» Makefile
- `makedefs` - ç·¨è­¯å™¨é…ç½®èˆ‡è¦å‰‡
- `examples/Makefile` - ç¯„ä¾‹ç›®éŒ„ Makefile
- `examples/uart_hello_world/Makefile` - UART ç¯„ä¾‹ Makefile
- `examples/arm_fir_example/Makefile` - FIR ç¯„ä¾‹ Makefile

**æ•™å­¸å…§å®¹**ï¼š
1. ç·¨è­¯æµç¨‹å››éšæ®µï¼ˆé è™•ç†ã€ç·¨è­¯ã€çµ„è­¯ã€é€£çµï¼‰
2. GCC ç·¨è­¯å™¨åƒæ•¸è©³è§£
3. ARM äº¤å‰ç·¨è­¯å·¥å…·éˆï¼ˆarm-none-eabi-gccï¼‰
4. Makefile èªæ³•èˆ‡è¦å‰‡
5. ä¾è³´é—œä¿‚èˆ‡è‡ªå‹•åŒ–å»ºç½®

**å¯¦ä½œç·´ç¿’**ï¼š
```bash
# æŸ¥çœ‹ Makefile
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S
cat makedefs

# ç·¨è­¯ UART ç¯„ä¾‹
cd examples/uart_hello_world
make clean
make

# è§€å¯Ÿç·¨è­¯éç¨‹
ls -lh gcc/
```

**ASCII åœ–è§£é‡é»**ï¼š
- ç·¨è­¯æµç¨‹åœ–ï¼ˆ.c â†’ .i â†’ .s â†’ .o â†’ .axf â†’ .binï¼‰
- Makefile ä¾è³´é—œä¿‚æ¨¹
- äº¤å‰ç·¨è­¯æ¶æ§‹åœ–

**é—œéµç¨‹å¼ç¢¼ç‰‡æ®µ**ï¼š
```makefile
# makedefs é‡è¦åƒæ•¸
CFLAGS = -mthumb \
         -mcpu=cortex-m3 \
         -O0 \
         -ffunction-sections \
         -fdata-sections \
         -D ARM_MATH_CM3

LDFLAGS = --gc-sections
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/02-ç¨‹å¼ç·¨è­¯èˆ‡åŸ·è¡Œ.md`

---

### æ¨¡çµ„ 03ï¼šè¨˜æ†¶é«”åŸç†

**å­¸ç¿’ç›®æ¨™**ï¼š
- ç†è§£ Flash èˆ‡ RAM çš„å·®ç•°
- èªè­˜è¨˜æ†¶é«”æ˜ å°„ï¼ˆMemory Mapï¼‰
- å­¸æœƒè§£è®€ Linker Script
- äº†è§£ç¨‹å¼å•Ÿå‹•æµç¨‹

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `examples/uart_hello_world/uart_hello_world.ld` - Linker è…³æœ¬
- `examples/arm_fir_example/arm_fir_example_f32.ld` - Linker è…³æœ¬
- `examples/uart_hello_world/startup_gcc.c` - å•Ÿå‹•ç¨‹å¼ç¢¼
- `examples/arm_fir_example/startup_gcc.c` - å•Ÿå‹•ç¨‹å¼ç¢¼

**æ•™å­¸å…§å®¹**ï¼š
1. LM3S6965 è¨˜æ†¶é«”ä½ˆå±€ï¼ˆ0x00000000 Flash, 0x20000000 SRAMï¼‰
2. Linker Script èªæ³•è§£æ
3. SECTIONSï¼ˆ.isr_vector, .text, .data, .bssï¼‰
4. å•Ÿå‹•ç¨‹å¼ç¢¼æµç¨‹ï¼ˆReset_Handlerï¼‰
5. ä¸­æ–·å‘é‡è¡¨ï¼ˆInterrupt Vector Tableï¼‰

**å¯¦ä½œç·´ç¿’**ï¼š
```bash
# æŸ¥çœ‹ Linker Script
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S/examples/uart_hello_world
cat uart_hello_world.ld

# æŸ¥çœ‹å•Ÿå‹•ç¨‹å¼ç¢¼
cat startup_gcc.c | grep -A 20 "Reset_Handler"

# æŸ¥çœ‹ç·¨è­¯å¾Œçš„è¨˜æ†¶é«”ä½¿ç”¨
arm-none-eabi-size gcc/uart_hello_world.axf
```

**ASCII åœ–è§£é‡é»**ï¼š
- LM3S6965 è¨˜æ†¶é«”åœ°åœ–
- ç¨‹å¼è¨˜æ†¶é«”ä½ˆå±€ï¼ˆ.text, .data, .bssï¼‰
- å•Ÿå‹•æµç¨‹åœ–ï¼ˆä¸Šé›» â†’ Reset_Handler â†’ mainï¼‰
- ä¸­æ–·å‘é‡è¡¨çµæ§‹

**é—œéµç¨‹å¼ç¢¼ç‰‡æ®µ**ï¼š
```c
// startup_gcc.c - ä¸­æ–·å‘é‡è¡¨
__attribute__ ((section(".isr_vector")))
void (* const g_pfnVectors[])(void) = {
    (void (*)(void))((unsigned long)&_stack_top),
    Reset_Handler,
    NMI_Handler,
    HardFault_Handler,
    // ... æ›´å¤šä¸­æ–·è™•ç†å™¨
};
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/03-è¨˜æ†¶é«”åŸç†.md`

---

### æ¨¡çµ„ 04ï¼šåµŒå…¥å¼ç³»çµ±å…¥é–€

**å­¸ç¿’ç›®æ¨™**ï¼š
- ç†è§£åµŒå…¥å¼ç³»çµ±èˆ‡ä¸€èˆ¬é›»è…¦çš„å·®ç•°
- èªè­˜ LM3S6965 å¾®æ§åˆ¶å™¨
- å­¸æœƒåŸºæœ¬çš„ UART è¼¸å‡º
- äº†è§£ç¡¬é«”æš«å­˜å™¨æ“ä½œ

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `examples/uart_hello_world/uart_hello_world.c` - UART ç¯„ä¾‹ä¸»ç¨‹å¼
- `examples/uart_hello_world/lm3s_config.h` - ç¡¬é«”é…ç½®
- `lm3s/lm3s_cmsis.h` - LM3S IRQ èˆ‡æš«å­˜å™¨å®šç¾©
- `lm3s/system_lm3s.c` - ç³»çµ±åˆå§‹åŒ–

**æ•™å­¸å…§å®¹**ï¼š
1. åµŒå…¥å¼ç³»çµ±ç‰¹æ€§ï¼ˆå³æ™‚æ€§ã€è³‡æºå—é™ã€å°ˆç”¨æ€§ï¼‰
2. LM3S6965 ç¡¬é«”è¦æ ¼ï¼ˆARM Cortex-M3, 64KB RAM, 256KB Flashï¼‰
3. UART é€šè¨ŠåŸç†
4. æš«å­˜å™¨ç›´æ¥å­˜å–
5. ç³»çµ±æ™‚é˜é…ç½®

**å¯¦ä½œç·´ç¿’**ï¼š
```bash
# ç·¨è­¯ä¸¦åŸ·è¡Œ UART ç¯„ä¾‹
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S
make

# ä½¿ç”¨ Docker åŸ·è¡Œ
docker run --rm \
    -v /home/sbplab/jiawei/qemu/CMSIS_LM3S:/work:ro \
    cmsis-lm3s-qemu:latest \
    bash -c "cd /work/examples/uart_hello_world/gcc && \
             timeout 3 qemu-system-arm -M lm3s6965evb -nographic \
                     -kernel uart_hello_world.bin"

# é æœŸè¼¸å‡ºï¼šHellow World?
```

**ASCII åœ–è§£é‡é»**ï¼š
- æ¡Œä¸Šå‹é›»è…¦ vs åµŒå…¥å¼ç³»çµ±æ¯”è¼ƒåœ–
- LM3S6965 æ–¹å¡Šåœ–
- UART é€šè¨Šæ™‚åºåœ–
- æš«å­˜å™¨å­˜å–ç¤ºæ„åœ–

**é—œéµç¨‹å¼ç¢¼ç‰‡æ®µ**ï¼š
```c
// uart_hello_world.c
void print_uart0(const char *s) {
    while(*s != '\0') {
        UART0->DR = (unsigned int)(*s);  // ç›´æ¥å¯«å…¥ UART è³‡æ–™æš«å­˜å™¨
        s++;
    }
}

int main(void) {
    print_uart0("Hellow World?\n");
    while(1) { }  // ç„¡çª®è¿´åœˆ
}
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/04-åµŒå…¥å¼ç³»çµ±å…¥é–€.md`

---

### æ¨¡çµ„ 05ï¼šARM æ¶æ§‹è©³è§£

**å­¸ç¿’ç›®æ¨™**ï¼š
- èªè­˜ ARM Cortex-M3 æ¶æ§‹
- ç†è§£ Thumb-2 æŒ‡ä»¤é›†
- å­¸æœƒæ“ä½œ NVICï¼ˆä¸­æ–·æ§åˆ¶å™¨ï¼‰
- äº†è§£æš«å­˜å™¨åŠŸèƒ½ï¼ˆR0-R15, SP, LR, PCï¼‰

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `CMSIS/Include/core_cm3.h` - Cortex-M3 æ ¸å¿ƒå®šç¾©
- `CMSIS/Include/core_cmFunc.h` - CMSIS æ ¸å¿ƒå‡½æ•¸
- `CMSIS/Include/core_cmInstr.h` - CMSIS æ ¸å¿ƒæŒ‡ä»¤
- `lm3s/lm3s_cmsis.h` - LM3S ç‰¹å®šå®šç¾©

**æ•™å­¸å…§å®¹**ï¼š
1. ARM æ¶æ§‹å®¶æ—ï¼ˆCortex-A/R/M ç³»åˆ—ï¼‰
2. Cortex-M3 æ ¸å¿ƒç‰¹æ€§ï¼ˆä¸‰éšç®¡ç·šã€ä½åŠŸè€—ï¼‰
3. Thumb-2 æŒ‡ä»¤é›†ï¼ˆ16-bit + 32-bitï¼‰
4. æš«å­˜å™¨çµ„ï¼ˆR0-R12 é€šç”¨ã€SPã€LRã€PCã€xPSRï¼‰
5. NVIC ä¸­æ–·ç®¡ç†
6. SysTick ç³»çµ±è¨ˆæ™‚å™¨

**å¯¦ä½œç·´ç¿’**ï¼š
```bash
# æŸ¥çœ‹ ARM æ ¸å¿ƒå®šç¾©
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S
grep -A 10 "NVIC_Type" CMSIS/Include/core_cm3.h

# ä½¿ç”¨ GDB æŸ¥çœ‹æš«å­˜å™¨
# (éœ€è¦å…ˆå•Ÿå‹• QEMU GDB Server)
```

**ASCII åœ–è§£é‡é»**ï¼š
- ARM æ¶æ§‹å®¶æ—æ¨¹
- Cortex-M3 æ–¹å¡Šåœ–
- æš«å­˜å™¨çµ„ç¹”åœ–
- NVIC ä¸­æ–·å„ªå…ˆç´šç¤ºæ„åœ–
- ç®¡ç·šåŸ·è¡Œæµç¨‹åœ–

**é—œéµç¨‹å¼ç¢¼ç‰‡æ®µ**ï¼š
```c
// core_cm3.h - NVIC çµæ§‹
typedef struct {
    __IO uint32_t ISER[8];      // Interrupt Set Enable Register
    uint32_t RESERVED0[24];
    __IO uint32_t ICER[8];      // Interrupt Clear Enable Register
    // ...
} NVIC_Type;

// å•Ÿç”¨ä¸­æ–·ç¯„ä¾‹
NVIC_EnableIRQ(UART0_IRQn);
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/05-ARMæ¶æ§‹è©³è§£.md`

---

### æ¨¡çµ„ 06ï¼šè¨Šè™Ÿè™•ç†åŸºç¤

**å­¸ç¿’ç›®æ¨™**ï¼š
- ç†è§£é¡æ¯”è¨Šè™Ÿèˆ‡æ•¸ä½è¨Šè™Ÿ
- èªè­˜å–æ¨£å®šç†ï¼ˆNyquistï¼‰
- å­¸ç¿’é »åŸŸèˆ‡æ™‚åŸŸæ¦‚å¿µ
- äº†è§£æ¿¾æ³¢å™¨åŸºæœ¬åŸç†

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- ï¼ˆç„¡ç‰¹å®šæª”æ¡ˆï¼Œç‚ºç†è«–åŸºç¤ï¼‰

**æ•™å­¸å…§å®¹**ï¼š
1. é¡æ¯”è¨Šè™Ÿ vs æ•¸ä½è¨Šè™Ÿ
2. ADCï¼ˆé¡æ¯”æ•¸ä½è½‰æ›ï¼‰èˆ‡ DAC
3. å–æ¨£é »ç‡èˆ‡ Nyquist å®šç†
4. æ™‚åŸŸèˆ‡é »åŸŸè¡¨ç¤º
5. æ¿¾æ³¢å™¨åˆ†é¡ï¼ˆä½é€šã€é«˜é€šã€å¸¶é€šã€å¸¶é˜»ï¼‰
6. FIR vs IIR æ¿¾æ³¢å™¨ç‰¹æ€§æ¯”è¼ƒ

**å¯¦ä½œç·´ç¿’**ï¼š
- æ‰‹ç¹ªæ­£å¼¦æ³¢å–æ¨£ç¤ºæ„åœ–
- è¨ˆç®— Nyquist é »ç‡ç·´ç¿’

**ASCII åœ–è§£é‡é»**ï¼š
- é¡æ¯”è¨Šè™Ÿå–æ¨£éç¨‹åœ–
- æ™‚åŸŸèˆ‡é »åŸŸå°æ‡‰åœ–
- æ¿¾æ³¢å™¨é »ç‡éŸ¿æ‡‰åœ–
- FIR vs IIR çµæ§‹æ¯”è¼ƒåœ–

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/06-è¨Šè™Ÿè™•ç†åŸºç¤.md`

---

### æ¨¡çµ„ 07ï¼šFIR æ¿¾æ³¢å™¨

**å­¸ç¿’ç›®æ¨™**ï¼š
- ç†è§£ FIR æ¿¾æ³¢å™¨åŸç†
- å­¸æœƒä½¿ç”¨ CMSIS-DSP FIR å‡½æ•¸
- åˆ†æ arm_fir_example ç¯„ä¾‹ç¨‹å¼
- è¨ˆç®—æ¿¾æ³¢å™¨æ•ˆèƒ½ï¼ˆSNRï¼‰

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `examples/arm_fir_example/arm_fir_example_f32.c` - FIR ç¯„ä¾‹ä¸»ç¨‹å¼
- `examples/arm_fir_example/arm_fir_data.c` - æ¸¬è©¦æ•¸æ“š
- `examples/arm_fir_example/math_helper.c` - æ•¸å­¸è¼”åŠ©å‡½æ•¸
- `CMSIS/DSP_Lib/Source/FilteringFunctions/arm_fir_f32.c` - FIR å¯¦ä½œ
- `CMSIS/DSP_Lib/Source/FilteringFunctions/arm_fir_init_f32.c` - FIR åˆå§‹åŒ–

**æ•™å­¸å…§å®¹**ï¼š
1. FIR æ¿¾æ³¢å™¨æ•¸å­¸åŸç†ï¼ˆå·ç©å’Œï¼‰
2. æ¿¾æ³¢å™¨ä¿‚æ•¸è¨­è¨ˆï¼ˆä½¿ç”¨ MATLAB fir1ï¼‰
3. CMSIS-DSP FIR è³‡æ–™çµæ§‹
4. arm_fir_init_f32 èˆ‡ arm_fir_f32 å‡½æ•¸
5. SNRï¼ˆä¿¡è™Ÿé›œè¨Šæ¯”ï¼‰è¨ˆç®—
6. æ•ˆèƒ½åˆ†æ

**å¯¦ä½œç·´ç¿’**ï¼š
```bash
# ç·¨è­¯ FIR ç¯„ä¾‹
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S/examples/arm_fir_example
make clean
make

# åŸ·è¡Œç¯„ä¾‹
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S
docker run --rm \
    -v /home/sbplab/jiawei/qemu/CMSIS_LM3S:/work:ro \
    cmsis-lm3s-qemu:latest \
    bash -c "cd /work/examples/arm_fir_example/gcc && \
             timeout 3 qemu-system-arm -M lm3s6965evb -nographic \
                     -kernel arm_fir_example_f32.bin"

# ä½¿ç”¨ GDB é™¤éŒ¯ FIR
# (è©³è¦‹æ¨¡çµ„ 11)
```

**ASCII åœ–è§£é‡é»**ï¼š
- FIR æ¿¾æ³¢å™¨çµæ§‹åœ–ï¼ˆå»¶é²ç·šï¼‰
- å·ç©é‹ç®—ç¤ºæ„åœ–
- æ¸¬è©¦è¨Šè™Ÿé »è­œåœ–ï¼ˆ1 kHz + 15 kHzï¼‰
- æ¿¾æ³¢å¾Œé »è­œåœ–ï¼ˆåƒ… 1 kHzï¼‰
- arm_fir_instance_f32 è³‡æ–™çµæ§‹åœ–

**é—œéµç¨‹å¼ç¢¼ç‰‡æ®µ**ï¼š
```c
// arm_fir_example_f32.c
int main(void) {
    arm_fir_instance_f32 S;
    float32_t snr;

    // åˆå§‹åŒ– FIR æ¿¾æ³¢å™¨
    // 29 å€‹ä¿‚æ•¸ï¼Œå€å¡Šå¤§å° 32
    arm_fir_init_f32(&S, NUM_TAPS, (float32_t *)&firCoeffs32[0],
                     &firStateF32[0], BLOCK_SIZE);

    // åŸ·è¡Œæ¿¾æ³¢ï¼ˆå€å¡Šè™•ç†ï¼‰
    for(i=0; i < TEST_LENGTH_SAMPLES; i += BLOCK_SIZE) {
        arm_fir_f32(&S, testInput_f32_1kHz_15kHz + i,
                    testOutput + i, BLOCK_SIZE);
    }

    // è¨ˆç®— SNR
    snr = arm_snr_f32(refOutput, testOutput, TEST_LENGTH_SAMPLES);

    // æª¢æŸ¥çµæœ
    if(snr > SNR_THRESHOLD_F32) {
        print_uart0("GOOD\r\n");
    }
}
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/07-FIRæ¿¾æ³¢å™¨.md`

---

### æ¨¡çµ„ 08ï¼šIIR æ¿¾æ³¢å™¨

**å­¸ç¿’ç›®æ¨™**ï¼š
- ç†è§£ IIR æ¿¾æ³¢å™¨åŸç†
- èªè­˜ Biquad ç´šè¯çµæ§‹
- æ¯”è¼ƒ FIR èˆ‡ IIR çš„å„ªç¼ºé»
- å­¸æœƒä½¿ç”¨ CMSIS-DSP IIR å‡½æ•¸

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `CMSIS/DSP_Lib/Source/FilteringFunctions/arm_biquad_cascade_df2T_f32.c`
- `CMSIS/DSP_Lib/Source/FilteringFunctions/arm_biquad_cascade_df2T_init_f32.c`
- `CMSIS/Include/arm_math.h` - IIR è³‡æ–™çµæ§‹å®šç¾©

**æ•™å­¸å…§å®¹**ï¼š
1. IIR æ¿¾æ³¢å™¨æ•¸å­¸åŸç†ï¼ˆéè¿´æ–¹ç¨‹å¼ï¼‰
2. Biquadï¼ˆäºŒéšç¯€ï¼‰çµæ§‹
3. Direct Form II Transposed (DF2T)
4. ç©©å®šæ€§å•é¡Œ
5. FIR vs IIR æ•ˆèƒ½æ¯”è¼ƒ
6. CMSIS-DSP IIR å‡½æ•¸ä½¿ç”¨

**å¯¦ä½œç·´ç¿’**ï¼š
- åˆ†æ IIR å‡½å¼åº«åŸå§‹ç¢¼
- è¨­è¨ˆç°¡å–® IIR ä¿‚æ•¸

**ASCII åœ–è§£é‡é»**ï¼š
- IIR æ¿¾æ³¢å™¨æ–¹å¡Šåœ–ï¼ˆæœ‰å›æˆï¼‰
- Biquad ç´šè¯çµæ§‹åœ–
- DF2T ä¿¡è™Ÿæµåœ–
- FIR vs IIR é »ç‡éŸ¿æ‡‰æ¯”è¼ƒ
- ç©©å®šæ€§ç¤ºæ„åœ–ï¼ˆæ¥µé»ä½ç½®ï¼‰

**é—œéµç¨‹å¼ç¢¼ç‰‡æ®µ**ï¼š
```c
// IIR Biquad ä½¿ç”¨ç¯„ä¾‹
arm_biquad_casd_df2T_instance_f32 S;

arm_biquad_cascade_df2T_init_f32(&S, numStages, pCoeffs, pState);
arm_biquad_cascade_df2T_f32(&S, pSrc, pDst, blockSize);
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/08-IIRæ¿¾æ³¢å™¨.md`

---

### æ¨¡çµ„ 09ï¼šDocker å®¹å™¨æŠ€è¡“

**å­¸ç¿’ç›®æ¨™**ï¼š
- ç†è§£å®¹å™¨åŒ–æ¦‚å¿µ
- å­¸æœƒä½¿ç”¨ Dockerfile
- èªè­˜ docker-compose
- å»ºç«‹é–‹ç™¼ç’°å¢ƒ

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `Dockerfile` - QEMU ARM å®¹å™¨
- `Dockerfile.gdb` - QEMU + GDB å®¹å™¨
- `docker-compose.yml` - Docker Compose è¨­å®š
- `run-examples.sh` - è‡ªå‹•åŸ·è¡Œè…³æœ¬

**æ•™å­¸å…§å®¹**ï¼š
1. ç‚ºä»€éº¼éœ€è¦ Dockerï¼ˆç’°å¢ƒéš”é›¢ã€å¯é‡ç¾æ€§ï¼‰
2. å®¹å™¨ vs è™›æ“¬æ©Ÿ
3. Dockerfile èªæ³•ï¼ˆFROM, RUN, WORKDIR, CMDï¼‰
4. Docker åŸºæœ¬æŒ‡ä»¤ï¼ˆbuild, run, ps, logsï¼‰
5. docker-compose å¤šå®¹å™¨ç®¡ç†
6. Volume æ›è¼‰ï¼ˆä¸»æ©Ÿèˆ‡å®¹å™¨å…±äº«æª”æ¡ˆï¼‰

**å¯¦ä½œç·´ç¿’**ï¼š
```bash
# å»ºç½® Docker image
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S
docker build -t cmsis-lm3s-qemu:latest -f Dockerfile .
docker build -t cmsis-lm3s-gdb:latest -f Dockerfile.gdb .

# æŸ¥çœ‹ images
docker images | grep cmsis

# ä½¿ç”¨ docker-compose
docker-compose run uart-hello
docker-compose run fir-filter

# ä½¿ç”¨è‡ªå‹•è…³æœ¬
./run-examples.sh build
./run-examples.sh all
```

**ASCII åœ–è§£é‡é»**ï¼š
- å®¹å™¨ vs è™›æ“¬æ©Ÿæ¶æ§‹åœ–
- Dockerfile å»ºç½®æµç¨‹åœ–
- Volume æ›è¼‰ç¤ºæ„åœ–
- docker-compose æœå‹™é—œä¿‚åœ–

**é—œéµç¨‹å¼ç¢¼ç‰‡æ®µ**ï¼š
```dockerfile
# Dockerfile
FROM debian:bookworm-slim
RUN apt-get update && apt-get install -y \
    qemu-system-arm \
    ca-certificates && \
    rm -rf /var/lib/apt/lists/*
WORKDIR /work
CMD ["qemu-system-arm", "--version"]
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/09-Dockerå®¹å™¨æŠ€è¡“.md`

---

### æ¨¡çµ„ 10ï¼šQEMU æ¨¡æ“¬å™¨

**å­¸ç¿’ç›®æ¨™**ï¼š
- ç†è§£ç¡¬é«”æ¨¡æ“¬åŸç†
- å­¸æœƒä½¿ç”¨ QEMU ARM
- æ¨¡æ“¬ LM3S6965EVB é–‹ç™¼æ¿
- ç†è§£ QEMU åƒæ•¸

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `run-examples.sh` - QEMU åŸ·è¡Œè…³æœ¬
- `docker-compose.yml` - QEMU æœå‹™å®šç¾©

**æ•™å­¸å…§å®¹**ï¼š
1. ç‚ºä»€éº¼éœ€è¦ QEMUï¼ˆç„¡éœ€å¯¦é«”ç¡¬é«”ï¼‰
2. QEMU ç³»çµ±æ¨¡æ“¬ vs ä½¿ç”¨è€…æ¨¡å¼æ¨¡æ“¬
3. LM3S6965EVB æ©Ÿå™¨é¡å‹
4. QEMU å¸¸ç”¨åƒæ•¸ï¼ˆ-M, -kernel, -nographic, -s, -Sï¼‰
5. QEMU Monitor ä»‹é¢
6. QEMU GDB Server åŠŸèƒ½

**å¯¦ä½œç·´ç¿’**ï¼š
```bash
# ç›´æ¥ä½¿ç”¨ QEMU åŸ·è¡Œ
qemu-system-arm -M lm3s6965evb \
                -nographic \
                -kernel uart_hello_world.bin

# ä½¿ç”¨ Docker åŸ·è¡Œ
docker run --rm \
    -v /home/sbplab/jiawei/qemu/CMSIS_LM3S:/work:ro \
    cmsis-lm3s-qemu:latest \
    bash -c "cd /work/examples/uart_hello_world/gcc && \
             timeout 3 qemu-system-arm -M lm3s6965evb \
                     -nographic -kernel uart_hello_world.bin"

# å•Ÿå‹• GDB Serverï¼ˆç­‰å¾…é™¤éŒ¯å™¨é€£æ¥ï¼‰
qemu-system-arm -M lm3s6965evb \
                -nographic \
                -kernel arm_fir_example_f32.bin \
                -s -S
# -s: åœ¨ port 1234 å•Ÿå‹• GDB server
# -S: å•Ÿå‹•æ™‚æš«åœï¼Œç­‰å¾… GDB é€£æ¥
```

**ASCII åœ–è§£é‡é»**ï¼š
- QEMU æ¶æ§‹åœ–ï¼ˆTCG å‹•æ…‹ç¿»è­¯ï¼‰
- LM3S6965EVB è™›æ“¬ç¡¬é«”åœ–
- QEMU èˆ‡ GDB é€£æ¥æ¶æ§‹åœ–
- åŸ·è¡Œæµç¨‹åœ–

**é—œéµç¨‹å¼ç¢¼ç‰‡æ®µ**ï¼š
```bash
# run-examples.sh ç‰‡æ®µ
run_uart_example() {
    echo "åŸ·è¡Œ UART Hello World ç¯„ä¾‹..."
    docker run --rm \
        -v "$PROJECT_ROOT:/work:ro" \
        cmsis-lm3s-qemu:latest \
        bash -c "cd /work/examples/uart_hello_world/gcc && \
                 timeout 3 qemu-system-arm -M lm3s6965evb \
                         -nographic -kernel uart_hello_world.bin"
}
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/10-QEMUæ¨¡æ“¬å™¨.md`

---

### æ¨¡çµ„ 11ï¼šGDB é™¤éŒ¯å™¨

**å­¸ç¿’ç›®æ¨™**ï¼š
- å­¸æœƒä½¿ç”¨ GDB é™¤éŒ¯ ARM ç¨‹å¼
- è¨­å®šä¸­æ–·é»ï¼ˆbreakpointï¼‰
- æª¢è¦–æš«å­˜å™¨èˆ‡è¨˜æ†¶é«”
- å–®æ­¥åŸ·è¡Œèˆ‡è¿½è¹¤

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `test_gdb.gdb` - ç°¡å–® GDB æ¸¬è©¦è…³æœ¬
- `test_detailed_gdb.gdb` - è©³ç´° GDB æ¸¬è©¦è…³æœ¬
- `GDB-é™¤éŒ¯å¯¦æˆ°æŒ‡å—.md` - GDB ä½¿ç”¨æŒ‡å—
- `examples/arm_fir_example/gcc/gdb_commands.gdb` - FIR ç‰¹å®šé™¤éŒ¯æŒ‡ä»¤

**æ•™å­¸å…§å®¹**ï¼š
1. GDB åŸºæœ¬æ¦‚å¿µ
2. gdb-multiarchï¼ˆå¤šæ¶æ§‹æ”¯æ´ï¼‰
3. é ç«¯é™¤éŒ¯ï¼ˆtarget remoteï¼‰
4. ä¸­æ–·é»ç®¡ç†ï¼ˆbreak, delete, disableï¼‰
5. ç¨‹å¼æ§åˆ¶ï¼ˆcontinue, next, step, finishï¼‰
6. æª¢è¦–è³‡è¨Šï¼ˆinfo registers, x/addr, backtraceï¼‰
7. GDB è…³æœ¬è‡ªå‹•åŒ–

**å¯¦ä½œç·´ç¿’**ï¼š
```bash
# çµ‚ç«¯ 1ï¼šå•Ÿå‹• QEMU GDB Server
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S
docker run --rm -d \
    -v /home/sbplab/jiawei/qemu/CMSIS_LM3S:/work:ro \
    -p 1234:1234 \
    --name qemu_gdb_server \
    cmsis-lm3s-qemu:latest \
    bash -c "cd /work/examples/arm_fir_example/gcc && \
             exec qemu-system-arm -M lm3s6965evb -nographic \
                  -kernel arm_fir_example_f32.bin -s -S"

# çµ‚ç«¯ 2ï¼šå•Ÿå‹• GDB Client
docker run --rm -it \
    -v /home/sbplab/jiawei/qemu/CMSIS_LM3S:/work:ro \
    --network host \
    cmsis-lm3s-gdb:latest \
    bash -c "cd /work/examples/arm_fir_example/gcc && \
             gdb-multiarch arm_fir_example_f32.axf"

# GDB æŒ‡ä»¤
(gdb) target remote localhost:1234
(gdb) break main
(gdb) break arm_fir_f32
(gdb) continue
(gdb) info registers
(gdb) x/16x $sp
(gdb) backtrace

# ä½¿ç”¨è‡ªå‹•åŒ–è…³æœ¬
docker run --rm \
    -v /home/sbplab/jiawei/qemu/CMSIS_LM3S:/work:ro \
    --network host \
    cmsis-lm3s-gdb:latest \
    bash -c "cd /work/examples/arm_fir_example/gcc && \
             gdb-multiarch -batch -x /work/test_detailed_gdb.gdb \
                           arm_fir_example_f32.axf"
```

**ASCII åœ–è§£é‡é»**ï¼š
- GDB èˆ‡ QEMU é€£æ¥æ¶æ§‹åœ–
- é™¤éŒ¯å·¥ä½œæµç¨‹åœ–
- è¨˜æ†¶é«”æª¢è¦–ç¤ºæ„åœ–
- å‘¼å«å †ç–Šï¼ˆCall Stackï¼‰ç¤ºæ„åœ–
- ä¸­æ–·é»åŸç†åœ–

**é—œéµ GDB æŒ‡ä»¤**ï¼š
```gdb
# é€£æ¥
target remote localhost:1234

# ä¸­æ–·é»
break main
break arm_fir_f32
break *0x400

# åŸ·è¡Œæ§åˆ¶
continue (c)
next (n)
step (s)
finish

# æª¢è¦–
info registers
info breakpoints
print/x $r0
x/16x $sp
backtrace (bt)

# é›¢é–‹
quit
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/11-GDBé™¤éŒ¯å™¨.md`

---

### æ¨¡çµ„ 12ï¼šCMSIS-DSP å‡½å¼åº«

**å­¸ç¿’ç›®æ¨™**ï¼š
- èªè­˜ CMSIS æ¨™æº–
- ç†è§£ CMSIS-DSP æ¶æ§‹
- å­¸æœƒä½¿ç”¨ DSP å‡½æ•¸ï¼ˆFIRã€FFTã€Matrix ç­‰ï¼‰
- äº†è§£å®šé»èˆ‡æµ®é»é‹ç®—

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- `CMSIS/Include/arm_math.h` - CMSIS DSP ä¸»æ¨™é ­
- `CMSIS/Include/core_cm3.h` - Cortex-M3 æ ¸å¿ƒ
- `CMSIS/DSP_Lib/Source/` - DSP å‡½å¼åº«æºç¢¼ï¼ˆ271 å€‹ .c æª”ï¼‰
  - `BasicMathFunctions/` (35 å€‹)
  - `ComplexMathFunctions/` (18 å€‹)
  - `ControllerFunctions/` (8 å€‹)
  - `FastMathFunctions/` (8 å€‹)
  - `FilteringFunctions/` (99 å€‹)
  - `MatrixFunctions/` (25 å€‹)
  - `StatisticsFunctions/` (25 å€‹)
  - `SupportFunctions/` (20 å€‹)
  - `TransformFunctions/` (31 å€‹)
  - `CommonTables/` (2 å€‹)

**æ•™å­¸å…§å®¹**ï¼š
1. CMSIS æ¨™æº–ç°¡ä»‹ï¼ˆCortex Microcontroller Software Interface Standardï¼‰
2. CMSIS äº”å¤§çµ„ä»¶ï¼ˆCore, DSP, RTOS, Driver, NNï¼‰
3. CMSIS-DSP å‡½å¼åº«æ¶æ§‹
4. è³‡æ–™å‹åˆ¥ï¼ˆfloat32_t, q31_t, q15_t, q7_tï¼‰
5. å®šé»æ•¸é‹ç®—åŸç†
6. 10 å¤§å‡½æ•¸åˆ†é¡è©³è§£
7. æ•ˆèƒ½æœ€ä½³åŒ–æŠ€å·§

**å¯¦ä½œç·´ç¿’**ï¼š
```bash
# æŸ¥çœ‹ DSP å‡½å¼åº«çµæ§‹
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S/CMSIS/DSP_Lib/Source
ls -la

# çµ±è¨ˆå„åˆ†é¡å‡½æ•¸æ•¸é‡
find . -name "*.c" | wc -l

# æŸ¥çœ‹ FIR å‡½æ•¸å¯¦ä½œ
cat FilteringFunctions/arm_fir_f32.c

# æŸ¥çœ‹æ¨™é ­æª”å®šç¾©
grep -A 20 "arm_fir_instance_f32" ../Include/arm_math.h
```

**ASCII åœ–è§£é‡é»**ï¼š
- CMSIS æ¶æ§‹ç¸½è¦½åœ–
- CMSIS-DSP 10 å¤§åˆ†é¡æ¨¹ç‹€åœ–
- å®šé»æ•¸è¡¨ç¤ºæ³•ï¼ˆQ31, Q15, Q7ï¼‰
- è³‡æ–™å‹åˆ¥å°æ‡‰è¡¨
- å‡½æ•¸å‘½åè¦å‰‡åœ–

**é—œéµè³‡æ–™çµæ§‹**ï¼š
```c
// arm_math.h
typedef struct {
    uint16_t numTaps;         // æ¿¾æ³¢å™¨ä¿‚æ•¸æ•¸é‡
    float32_t *pState;        // ç‹€æ…‹ç·©è¡å€
    float32_t *pCoeffs;       // ä¿‚æ•¸é™£åˆ—
} arm_fir_instance_f32;

typedef struct {
    uint32_t nfft;            // FFT é•·åº¦
    uint8_t ifftFlag;         // FFT/IFFT æ¨™èªŒ
    uint8_t bitReverseFlag;   // ä½å…ƒåè½‰æ¨™èªŒ
    float32_t *pTwiddle;      // æ—‹è½‰å› å­
    // ...
} arm_cfft_radix4_instance_f32;
```

**å¸¸ç”¨å‡½æ•¸ç¤ºä¾‹**ï¼š
```c
// åŸºæœ¬æ•¸å­¸
arm_add_f32(pSrcA, pSrcB, pDst, blockSize);
arm_dot_prod_f32(pSrcA, pSrcB, blockSize, &result);

// æ¿¾æ³¢
arm_fir_f32(&S, pSrc, pDst, blockSize);
arm_biquad_cascade_df2T_f32(&S, pSrc, pDst, blockSize);

// FFT
arm_cfft_f32(&S, pSrc, ifftFlag, doBitReverse);

// çŸ©é™£
arm_mat_mult_f32(&srcA, &srcB, &dst);

// çµ±è¨ˆ
arm_mean_f32(pSrc, blockSize, &result);
arm_var_f32(pSrc, blockSize, &result);
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/12-CMSIS-DSPå‡½å¼åº«.md`

---

### æ¨¡çµ„ 13ï¼šå°ˆæ¡ˆå¯¦æˆ°æ¼”ç·´

**å­¸ç¿’ç›®æ¨™**ï¼š
- æ•´åˆæ‰€æœ‰å­¸éçš„çŸ¥è­˜
- å¾é›¶é–‹å§‹å»ºç½®å°ˆæ¡ˆ
- å®Œæ•´é™¤éŒ¯æµç¨‹
- æ•ˆèƒ½åˆ†æèˆ‡æœ€ä½³åŒ–

**å°æ‡‰å°ˆæ¡ˆæª”æ¡ˆ**ï¼š
- æ•´å€‹ CMSIS_LM3S å°ˆæ¡ˆ

**æ•™å­¸å…§å®¹**ï¼š
1. å°ˆæ¡ˆæ¶æ§‹ç¸½è¦½
2. å®Œæ•´é–‹ç™¼æµç¨‹
3. æ•…éšœæ’é™¤æŠ€å·§
4. æ•ˆèƒ½åˆ†æ
5. ç¨‹å¼ç¢¼æœ€ä½³åŒ–
6. æ’°å¯«è‡ªå·±çš„ DSP æ‡‰ç”¨

**å¯¦æˆ°ç·´ç¿’**ï¼š

#### ç·´ç¿’ 1ï¼šå»ºç½®èˆ‡åŸ·è¡Œæ‰€æœ‰ç¯„ä¾‹
```bash
# 1. æ¸…ç†å°ˆæ¡ˆ
cd /home/sbplab/jiawei/qemu/CMSIS_LM3S
make clean

# 2. é‡æ–°ç·¨è­¯
make

# 3. åŸ·è¡Œ UART ç¯„ä¾‹
./run-examples.sh uart

# 4. åŸ·è¡Œ FIR ç¯„ä¾‹
./run-examples.sh fir

# 5. æŸ¥çœ‹ç·¨è­¯ç”¢ç‰©
ls -lh examples/*/gcc/
```

#### ç·´ç¿’ 2ï¼šä½¿ç”¨ GDB å®Œæ•´é™¤éŒ¯ FIR ç¯„ä¾‹
```bash
# å•Ÿå‹• QEMU GDB Server
docker run --rm -d \
    -v /home/sbplab/jiawei/qemu/CMSIS_LM3S:/work:ro \
    -p 1234:1234 \
    --name qemu_gdb_server \
    cmsis-lm3s-qemu:latest \
    bash -c "cd /work/examples/arm_fir_example/gcc && \
             exec qemu-system-arm -M lm3s6965evb -nographic \
                  -kernel arm_fir_example_f32.bin -s -S"

# é€£æ¥ GDB ä¸¦è¨­å®šä¸­æ–·é»
docker run --rm -it \
    -v /home/sbplab/jiawei/qemu/CMSIS_LM3S:/work:ro \
    --network host \
    cmsis-lm3s-gdb:latest \
    bash -c "cd /work/examples/arm_fir_example/gcc && \
             gdb-multiarch arm_fir_example_f32.axf"

# åœ¨ GDB ä¸­åŸ·è¡Œ
(gdb) target remote localhost:1234
(gdb) break main
(gdb) break arm_fir_init_f32
(gdb) break arm_fir_f32
(gdb) continue

# æª¢è¦– FIR çµæ§‹
(gdb) print S
(gdb) print S.numTaps
(gdb) x/29f S.pCoeffs

# å–®æ­¥è¿½è¹¤æ¿¾æ³¢éç¨‹
(gdb) step
(gdb) info registers
```

#### ç·´ç¿’ 3ï¼šä¿®æ”¹ FIR ç¯„ä¾‹ï¼ˆæ”¹è®Šæ¿¾æ³¢å™¨åƒæ•¸ï¼‰
1. ä¿®æ”¹æˆªæ­¢é »ç‡
2. é‡æ–°ç·¨è­¯
3. åŸ·è¡Œä¸¦è§€å¯Ÿçµæœ
4. ä½¿ç”¨ GDB é©—è­‰

#### ç·´ç¿’ 4ï¼šæ’°å¯«æ–°çš„ DSP æ‡‰ç”¨
- å»ºç«‹æ–°ç¯„ä¾‹ç›®éŒ„
- æ’°å¯«ç¨‹å¼ï¼ˆä½¿ç”¨ CMSIS-DSPï¼‰
- æ’°å¯« Makefile
- ç·¨è­¯ã€é™¤éŒ¯ã€æ¸¬è©¦

**ASCII åœ–è§£é‡é»**ï¼š
- å®Œæ•´é–‹ç™¼æµç¨‹åœ–
- å°ˆæ¡ˆç›®éŒ„æ¨¹
- é™¤éŒ¯å·¥ä½œæµç¨‹
- æ•ˆèƒ½åˆ†æç¤ºæ„åœ–

**æ•…éšœæ’é™¤æª¢æŸ¥æ¸…å–®**ï¼š
```
âœ“ ç·¨è­¯éŒ¯èª¤
  - æª¢æŸ¥ arm-none-eabi-gcc æ˜¯å¦å®‰è£
  - æª¢æŸ¥ Makefile è·¯å¾‘æ˜¯å¦æ­£ç¢º
  - æª¢æŸ¥ CMSIS è·¯å¾‘æ˜¯å¦æ­£ç¢º

âœ“ åŸ·è¡ŒéŒ¯èª¤
  - æª¢æŸ¥ QEMU æ˜¯å¦å®‰è£
  - æª¢æŸ¥ .bin æª”æ¡ˆæ˜¯å¦å­˜åœ¨
  - æª¢æŸ¥ Docker å®¹å™¨ç‹€æ…‹

âœ“ é™¤éŒ¯éŒ¯èª¤
  - æª¢æŸ¥ GDB Server æ˜¯å¦å•Ÿå‹•ï¼ˆport 1234ï¼‰
  - æª¢æŸ¥ .axf æª”æ¡ˆæ˜¯å¦å­˜åœ¨
  - æª¢æŸ¥ç¶²è·¯é€£æ¥ï¼ˆ--network hostï¼‰
```

**æ•™å­¸æª”æ¡ˆ**ï¼š`tutorials/13-å°ˆæ¡ˆå¯¦æˆ°æ¼”ç·´.md`

---

## ğŸ“‚ æ•™å­¸æª”æ¡ˆçµæ§‹

å®Œæˆæœ¬æ•™å­¸å¤§ç¶±å¾Œï¼Œå°‡å»ºç«‹ä»¥ä¸‹æª”æ¡ˆçµæ§‹ï¼š

```
CMSIS_LM3S/
â”œâ”€â”€ æ•™å­¸å¤§ç¶±.md                           # æœ¬æª”æ¡ˆï¼ˆç¸½è¦½ï¼‰
â”‚
â”œâ”€â”€ tutorials/                             # æ•™å­¸æ¨¡çµ„ç›®éŒ„
â”‚   â”œâ”€â”€ 01-é›»è…¦åŸºç¤çŸ¥è­˜.md
â”‚   â”œâ”€â”€ 02-ç¨‹å¼ç·¨è­¯èˆ‡åŸ·è¡Œ.md
â”‚   â”œâ”€â”€ 03-è¨˜æ†¶é«”åŸç†.md
â”‚   â”œâ”€â”€ 04-åµŒå…¥å¼ç³»çµ±å…¥é–€.md
â”‚   â”œâ”€â”€ 05-ARMæ¶æ§‹è©³è§£.md
â”‚   â”œâ”€â”€ 06-è¨Šè™Ÿè™•ç†åŸºç¤.md
â”‚   â”œâ”€â”€ 07-FIRæ¿¾æ³¢å™¨.md
â”‚   â”œâ”€â”€ 08-IIRæ¿¾æ³¢å™¨.md
â”‚   â”œâ”€â”€ 09-Dockerå®¹å™¨æŠ€è¡“.md
â”‚   â”œâ”€â”€ 10-QEMUæ¨¡æ“¬å™¨.md
â”‚   â”œâ”€â”€ 11-GDBé™¤éŒ¯å™¨.md
â”‚   â”œâ”€â”€ 12-CMSIS-DSPå‡½å¼åº«.md
â”‚   â””â”€â”€ 13-å°ˆæ¡ˆå¯¦æˆ°æ¼”ç·´.md
â”‚
â”œâ”€â”€ exercises/                             # ç·´ç¿’é¡Œç›®éŒ„ï¼ˆé¸ç”¨ï¼‰
â”‚   â”œâ”€â”€ 01-exercises.md
â”‚   â”œâ”€â”€ 02-exercises.md
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ [åŸæœ‰å°ˆæ¡ˆæª”æ¡ˆ...]
```

---

## ğŸ“ å­¸ç¿’å»ºè­°

### é©åˆå°è±¡
- **å®Œå…¨æ–°æ‰‹**ï¼šå¾æ¨¡çµ„ 01 é–‹å§‹ï¼Œå¾ªåºæ¼¸é€²
- **æœ‰ç¨‹å¼åŸºç¤**ï¼šå¯è·³éæ¨¡çµ„ 01-02ï¼Œå¾æ¨¡çµ„ 03 é–‹å§‹
- **æœ‰åµŒå…¥å¼ç¶“é©—**ï¼šå¯ç›´æ¥å­¸ç¿’æ¨¡çµ„ 07-13ï¼ˆDSP èˆ‡å·¥å…·ï¼‰

### å­¸ç¿’ç¯€å¥
- **å¯†é›†å­¸ç¿’**ï¼šæ¯å¤© 3 å°æ™‚ï¼Œç´„ 2-3 é€±å®Œæˆ
- **æ­£å¸¸å­¸ç¿’**ï¼šæ¯é€± 6 å°æ™‚ï¼Œç´„ 2 å€‹æœˆå®Œæˆ
- **æ¥­é¤˜å­¸ç¿’**ï¼šæ¯é€± 3 å°æ™‚ï¼Œç´„ 3-4 å€‹æœˆå®Œæˆ

### å¿…å‚™å·¥å…·
- **ä½œæ¥­ç³»çµ±**ï¼šLinuxï¼ˆæ¨è–¦ Ubuntu/Debian/CentOSï¼‰
- **Docker**ï¼šç”¨æ–¼å»ºç«‹é–‹ç™¼ç’°å¢ƒ
- **æ–‡å­—ç·¨è¼¯å™¨**ï¼šVSCode / Vim / Emacs
- **çµ‚ç«¯æ©Ÿ**ï¼šæ”¯æ´ tmuxï¼ˆå¤šè¦–çª—é™¤éŒ¯ï¼‰

### å­¸ç¿’æª¢æŸ¥é»

#### ç¬¬ 1 é€±çµæŸ
- [ ] ç†è§£é›»è…¦åŸºæœ¬åŸç†
- [ ] æœƒä½¿ç”¨ Makefile ç·¨è­¯ç¨‹å¼
- [ ] ç†è§£è¨˜æ†¶é«”ä½ˆå±€

#### ç¬¬ 2 é€±çµæŸ
- [ ] æˆåŠŸåŸ·è¡Œ UART ç¯„ä¾‹
- [ ] ç†è§£ ARM æš«å­˜å™¨
- [ ] èªè­˜è¨Šè™Ÿè™•ç†åŸºç¤

#### ç¬¬ 4 é€±çµæŸ
- [ ] æˆåŠŸåŸ·è¡Œ FIR ç¯„ä¾‹
- [ ] ç†è§£ FIR æ¿¾æ³¢å™¨åŸç†
- [ ] æœƒä½¿ç”¨ Docker

#### ç¬¬ 6 é€±çµæŸ
- [ ] æœƒä½¿ç”¨ QEMU æ¨¡æ“¬å™¨
- [ ] æœƒä½¿ç”¨ GDB é™¤éŒ¯
- [ ] ç†è§£ CMSIS-DSP æ¶æ§‹

#### ç¬¬ 8 é€±çµæŸ
- [ ] èƒ½ç¨ç«‹å»ºç½®å°ˆæ¡ˆ
- [ ] èƒ½ä¿®æ”¹ä¸¦æ¸¬è©¦ FIR åƒæ•¸
- [ ] èƒ½æ’°å¯«ç°¡å–® DSP æ‡‰ç”¨

---

## ğŸ“– åƒè€ƒè³‡æº

### å®˜æ–¹æ–‡æª”
- [ARM CMSIS Documentation](https://arm-software.github.io/CMSIS_5/)
- [QEMU Documentation](https://www.qemu.org/docs/master/)
- [GDB User Manual](https://sourceware.org/gdb/documentation/)

### å°ˆæ¡ˆå…§æ–‡æª”
- `README.md` - å°ˆæ¡ˆåŸºæœ¬èªªæ˜
- `README-è©³ç´°å®‰è£åŸ·è¡ŒæŒ‡å—.md` - è©³ç´°å®‰è£æŒ‡å—
- `Dockerä½¿ç”¨æŒ‡å—.md` - Docker ä½¿ç”¨èªªæ˜
- `GDB-é™¤éŒ¯å¯¦æˆ°æŒ‡å—.md` - GDB å¯¦æˆ°æŒ‡å—
- `åŸ·è¡Œå ±å‘Š.md` - åŸ·è¡Œæ¸¬è©¦å ±å‘Š

### ç·šä¸Šè³‡æº
- ARM Cortex-M3 æŠ€è¡“åƒè€ƒæ‰‹å†Š
- CMSIS-DSP å‡½å¼åº«åƒè€ƒ
- æ•¸ä½è¨Šè™Ÿè™•ç†åŸºç¤æ•™æ

---

## âœ… å¾ŒçºŒæ­¥é©Ÿ

1. **å»ºç«‹ tutorials/ ç›®éŒ„**
2. **ä¾åºå»ºç«‹ 13 å€‹æ•™å­¸æ¨¡çµ„æª”æ¡ˆ**
3. **æ¯å€‹æ¨¡çµ„åŒ…å«**ï¼š
   - è©³ç´°ç†è«–èªªæ˜
   - è±å¯Œçš„ ASCII åœ–è§£
   - å°æ‡‰çš„ç¨‹å¼ç¢¼ç‰‡æ®µ
   - å¯¦ä½œç·´ç¿’æ­¥é©Ÿ
   - å¸¸è¦‹å•é¡Œèˆ‡è§£ç­”
4. **é¸ç”¨ï¼šå»ºç«‹ç·´ç¿’é¡Œåº«**
5. **é¸ç”¨ï¼šå»ºç«‹æ¸¬é©—ç³»çµ±**

---

## ğŸ“ ç‰ˆæœ¬è³‡è¨Š

- **ç‰ˆæœ¬**ï¼š1.0
- **å»ºç«‹æ—¥æœŸ**ï¼š2025-11-16
- **ä½œè€…**ï¼šClaude Code Assistant
- **ç‹€æ…‹**ï¼šè¦åŠƒå®Œæˆï¼Œå¾…å»ºç«‹å„æ¨¡çµ„æª”æ¡ˆ

---

## ğŸ”„ æ›´æ–°è¨˜éŒ„

| æ—¥æœŸ | ç‰ˆæœ¬ | èªªæ˜ |
|------|------|------|
| 2025-11-16 | 1.0 | åˆç‰ˆå¤§ç¶±å®Œæˆ |

---

**æº–å‚™å¥½é–‹å§‹å­¸ç¿’äº†å—ï¼Ÿè®“æˆ‘å€‘å¾æ¨¡çµ„ 01 é–‹å§‹å§ï¼** ğŸš€
